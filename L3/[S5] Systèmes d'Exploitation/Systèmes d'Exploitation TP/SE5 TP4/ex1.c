#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

//1.
int isValid(const char * ref){
  struct stat st;
  if(stat(ref, &st)==-1){
    printf("échec stat");
    return 1;
  }

  printf("numéro inoeud : %ld\n", st.st_ino);

  switch(st.st_mode & S_IFMT){
    case S_IFBLK:
      printf("périphérique de bloc\n");
      break;
    case S_IFCHR:
      printf("périphérique de caractère\n");
      break;
    case S_IFDIR:
      printf("répertoire\n");
      break;
    case S_IFIFO:
      printf("FIFO/tube\n");
      break;
    case S_IFLNK:
      printf("lien symbolique\n");
      break;
    case S_IFREG:
      printf("fichier ordinaire\n");
      break;
    case S_IFSOCK:
      printf("socket\n");
      break;
    default:
      printf("inconnu ?\n");
      break;
  }
  printf((st.st_mode & (S_IXUSR | S_IXGRP | S_IXOTH))?"exécutable\n":"non exécutable\n");

  return 0;
}

int main(int argc, char * argv[]) {
  if(argc!=2){
    printf("nombre d'arguments incorrecte");
    return 1;
  }
  return isValid(argv[1]);
}

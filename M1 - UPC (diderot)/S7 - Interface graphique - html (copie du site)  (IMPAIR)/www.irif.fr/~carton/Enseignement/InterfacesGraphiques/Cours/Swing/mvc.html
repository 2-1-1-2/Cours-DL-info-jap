<?xml version="1.0" encoding="iso-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<!-- Time-stamp: "mvc.html  11 Aug 2005 23:58:35" -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
  <title>
  Architecture Modèle/Vue/Contrôleur
  </title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="Author" content="Olivier Carton">
</head>

<body>

<h2>Architecture Modèle/Vue/Contrôleur</h2>

<p>L'architecture <em>Modèle/Vue/Contrôleur</em> (MVC) est une façon
d'organiser une interface graphique d'un programme.  Elle consiste à
distinguer trois entités distinctes qui sont, le <em>modèle</em>, la
<em>vue</em> et le <em>contrôleur</em> ayant chacun un rôle précis dans
l'interface.</p>

<p>L'organisation globale d'une interface graphique est souvent délicate.
Bien que la façon MVC d'organiser une interface ne soit pas la solution
miracle, elle fournit souvent une première approche qui peut ensuite être
adaptée.  Elle offre aussi un cadre pour structurer une application.</p>


<p>Dans l'architecture MVC, les rôles des trois entités sont les suivants.
<ul>
<li>modèle : données (accès et mise à jour)</li>
<li>vue : interface utilisateur (entrées et sorties)</li>
<li>contrôleur : gestion des événements et synchronisation</li>
</ul>

<h3>Rôle du modèle</h3>

<p>Le modèle contient les données manipulées par le programme.  Il assure
la gestion de ces données et garantit leur intégrité.  Dans le cas typique
d'une base de données, c'est le modèle qui la contient.</p>

<p>Le modèle offre des méthodes pour mettre à jour ces données (insertion
suppression, changement de valeur).  Il offre aussi des méthodes pour
récupérer ses données.  Dans le cas de données importantes, le modèle peut
autoriser plusieurs vues partielles des données.  Si par exemple le
programme manipule une base de données pour les emplois du temps, le 
modèle peut avoir des méthodes pour avoir, tous les cours d'une salle, tous
les cours d'une personnes ou tous les cours d'une groupe de Td.</td>

<h3>Rôle de la vue</h3>

<p>La vue fait l'interface avec l'utilisateur.  Sa première tâche est
d'afficher les données qu'elle a récupérées auprès du modèle.  Sa seconde
tâche est de recevoir tous les actions de l'utilisateur (clic de souris,
sélection d'une entrées, boutons, &hellip;).  Ses différents événements 
sont envoyés au contrôleur.</p>

<p>La vue peut aussi donner plusieurs vues, partielles ou non, des mêmes
données.  Par exemple, l'application de conversion de bases a un entier
comme unique donnée.  Ce même entier est affiché de multiples façons (en
texte dans différentes bases, bit par bit avec des boutons à cocher, avec
des curseurs).  La vue peut aussi offrir la possibilité à l'utilisateur de
changer de vue.</p>

<h3>Rôle du contrôleur</h3>

<p>Le contrôleur est chargé de la synchronisation du modèle et de la vue.
Il reçoit tous les événements de l'utilisateur et enclenche les actions à
effectuer.  Si une action nécessite un changement des données, le
contrôleur demande la modification des données au modèle et ensuite avertit
la vue que les données ont changé pour que celle-ci se mette à jour.
Certains événements de l'utilisateur ne concerne pas les données mais la
vue.  Dans ce cas, le contrôleur demande à la vue de se modifier.</p>

<p>Dans le cas d'une base de données des emplois du temps.  Une action
de l'utilisateur peut être l'entrée (saisie) d'un nouveau cours.  Le
contrôleur ajoute ce cours au modèle et demande sa prise en compte par
la vue.  Une action de l'utilisateur peut aussi être de sélectionner une
nouvelle personne pour visualiser tous ses cours.  Ceci me modifie pas
la base des cours mais nécessite simplement que la vue s'adapte et offre
à l'utilisateur une vision des cours de cette personne.</p>

<p>Le contrôleur est souvent scindé en plusieurs parties dont chacune
reçoit les événements d'une partie des composants.  En effet si un même
objet reçoit les événements de tous les composants, il lui faut déterminer
quelle est l'origine de chaque événement.  Ce tri des événements peut
s'avérer fastidieuse et peut conduire à un code pas très élégant (un énorme
<tt>switch</tt>).  C'est pour éviter ce problème que le contrôleur est
réparti en plusieurs objets.</p>

<h3>Interactions</h3>

<p>Les différentes interactions entre le modèle, la vue et le contrôleur
sont résumées par le schéma de la figure suivante.</p>

<p class="figure">
    <a name="fig:mvc"><img src="mvc.png"></a> 
    <br /><br />
    Fig. 1 : Interactions  entre le modèle, la vue et le contrôleur
</p>

<h2>Utilisation native en Swing</h2>

<p>La plupart des composants Swing (sauf les conteneurs) utilisent une
classe spécifique pour contenir leurs donnés.</p>

<ul>
<li>Les boutons (<tt>JButton</tt>) utilisent un objet de classe
  <tt>ButtonModel</tt> pour les données.</li>
<li>Les curseurs (<tt>JSlider</tt>) utilisent un objet de classe
  <tt>BoudedRangeModel</tt> pour les données.</li>
<li>Les listes (<tt>JList</tt>) utilisent un objet de classe
  <tt>ListModel</tt> pour les données et un objet de classe
  <tt>ListSelectionModel</tt> pour gérer les sélections.</li>
<li>Les arbres (<tt>JTree</tt>) utilisent un objet de classe
  <tt>TreeModel</tt> pour les données et un objet de classe
  <tt>TreeSelectionModel</tt> pour gérer les sélections.</li>
<li>Les tables (<tt>JTable</tt>) utilisent des objets de classe
  <tt>TableModel</tt> et <tt>TableColumnModel</tt> pour les données et un
  objet de classe <tt>ListSelectionModel</tt> pour gérer les sélections.</li> 
<li>Les composants de texte (<tt>JTextComponent</tt> et les classes
  dérivées <tt>JEditorPane</tt>, <tt>JTextArea</tt> et <tt>JTextField</tt>)
  utilisent un objet de classe <tt>Document</tt> pour gérer le texte.</li>
</ul>
</body>
</html>
